<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SB & Sons Cosmetics</title>

<!-- jsPDF + AutoTable for professional invoice -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.8.2/jspdf.plugin.autotable.min.js" defer></script>

<style>
  :root{
    --gold:#d4af37;
    --gold-dark:#b89213;
    --rice:#fff7e6;
    --pink:#ffe6ef;
    --blue:#e9f3ff;
    --ink:#1f2937;
  }
  *{box-sizing:border-box}
  body{
    margin:0;
    font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
    color:var(--ink);
    background:linear-gradient(90deg,var(--rice),var(--pink),var(--blue));
    background-attachment: fixed;
  }
  .top{
    background:#111;color:#fff;font-size:12px;padding:6px 12px;text-align:center
  }
  header{
    background:#111;color:#fff;padding:14px 20px;display:flex;align-items:center;gap:14px;position:sticky;top:0;z-index:50
  }
  header img{height:48px;width:auto}
  header h1{
    margin:0;font-size:20px;letter-spacing:.5px;
    background:linear-gradient(45deg,#f3e6a4,var(--gold));
    -webkit-background-clip:text;-webkit-text-fill-color:transparent;
  }
  .spacer{flex:1}
  .cart-btn{background:var(--gold);color:#111;border:0;border-radius:999px;padding:8px 14px;cursor:pointer;font-weight:600}
  .cart-btn:hover{background:var(--gold-dark);color:#fff}

  .hero{
    background:#e2ab2f;color:#111;display:grid;grid-template-columns:1.1fr .9fr;gap:24px;align-items:center;padding:38px 20px;
  }
  .hero h2{font-size:42px;margin:0 0 8px;font-weight:800}
  .hero p{opacity:.85;max-width:560px}
  .hero .cta{margin-top:16px;background:#111;color:#fff;border:0;border-radius:999px;padding:10px 18px;cursor:pointer}

  .feature-row{background:#fff9f1;border-top:1px solid #f1d9a8;border-bottom:1px solid #f1d9a8;display:grid;grid-template-columns:repeat(3,1fr);gap:18px;padding:18px 12px;text-align:center}
  .feature{background:#fff;border:1px solid #f6e4b6;border-radius:14px;padding:14px}

  .wrap{max-width:1120px;margin:24px auto;padding:0 14px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:18px}
  .card{background:#fff;border:1px solid #f1d9a8;border-radius:18px;overflow:hidden;box-shadow:0 6px 20px rgba(0,0,0,.06);display:flex;flex-direction:column}
  .card img{width:100%;height:180px;object-fit:contain;background:#fafafa}
  .card .body{padding:12px}
  .price{font-weight:700;color:#0f5132}
  .btn{background:var(--gold);color:#111;border:0;border-radius:10px;padding:8px 12px;cursor:pointer}
  .btn:hover{background:var(--gold-dark);color:#fff}
  .link{background:#111;color:#fff}

  .panel{background:#fff;border:1px solid #e7e7e7;border-radius:18px;padding:18px;margin-top:24px}
  .cart-list{list-style:none;padding:0;margin:0}
  .cart-item{display:flex;align-items:center;justify-content:space-between;padding:8px 0;border-bottom:1px dashed #eee}
  .qty{display:flex;align-items:center;gap:6px}
  .chip{border:1px solid #ddd;background:#f8fafc;border-radius:999px;width:26px;height:26px;display:inline-grid;place-content:center;cursor:pointer}
  .totals{margin-top:10px;font-weight:700}
  .row{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}
  input,select,textarea{width:100%;padding:10px;border:1px solid #ddd;border-radius:10px;font-size:14px}
  .actions{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
  .success{color:#0f5132;font-weight:700}

  dialog{border:0;border-radius:16px;width:min(680px,96%);padding:0;box-shadow:0 30px 80px rgba(0,0,0,.25)}
  .modal-head{padding:14px 16px;background:#111;color:#fff;display:flex;align-items:center;justify-content:space-between}
  .modal-body{padding:16px}
  .close{background:transparent;border:0;color:#fff;font-size:22px;cursor:pointer}
  @media (max-width:900px){.hero{grid-template-columns:1fr}}
</style>
</head>
<body>

<div class="top">Welcome to our store ‚Ä¢ WhatsApp: <b>+92 335 1411801</b> & <b>+92 304 0670263</b></div>

<header>
  <img src="logo.png" alt="SB & Sons Cosmetics Logo" />
  <h1>SB & Sons Cosmetics</h1>
  <div class="spacer"></div>
  <button class="cart-btn" onclick="document.getElementById('cart').scrollIntoView({behavior:'smooth'})">üõí View Cart</button>
</header>

<section class="hero">
  <div>
    <h2>Quality, you can trust.</h2>
    <p>Beauty products crafted with care. Explore our bestsellers, read benefits & ingredients, add to cart, and check out with a professional PDF invoice‚Äîsent to your WhatsApp in one tap.</p>
    <button class="cta" onclick="document.getElementById('shop').scrollIntoView({behavior:'smooth'})">Shop now</button>
  </div>
  <div>
    <div style="background:#f9d77f;border:2px dashed rgba(0,0,0,.15);height:260px;border-radius:18px;display:grid;place-content:center;font-weight:700;">
      SB & SONS ‚Äì Featured
    </div>
  </div>
</section>

<section class="feature-row wrap">
  <div class="feature">üèÖ <b>Quality Products</b><br>Tested & trusted by customers.</div>
  <div class="feature">üîÑ <b>Safe Return Process</b><br>7-day exchange policy.</div>
  <div class="feature">‚ö° <b>Fast Delivery</b><br>All over Pakistan.</div>
</section>

<section id="shop" class="wrap">
  <h2>Shop by products</h2>
  <div id="productGrid" class="grid"></div>
</section>

<section id="cart" class="wrap">
  <div class="panel">
    <h2>Your Cart</h2>
    <ul id="cartList" class="cart-list"></ul>
    <div id="totals" class="totals"></div>
  </div>

  <div class="panel">
    <h3>Checkout Details</h3>
    <div class="row">
      <div><label>Full Name*<br><input id="c_name" required></label></div>
      <div><label>Email*<br><input id="c_email" type="email" required></label></div>
      <div><label>Phone (with country code)*<br><input id="c_phone" placeholder="+92xxxxxxxxxx" required></label></div>
      <div><label>City*<br><input id="c_city" required></label></div>
    </div>
    <div style="margin-top:10px">
      <label>Delivery Address*<br><textarea id="c_address" rows="2" required></textarea></label>
    </div>
    <div style="margin-top:10px" class="row">
      <div>
        <label>Payment Method*<br>
          <select id="c_payment">
            <option value="Cash on Delivery" selected>Cash on Delivery (Recommended)</option>
            <option value="JazzCash - 03040670263 (Syed Hamza Ali Shah)">JazzCash ‚Äì 03040670263 (Syed Hamza Ali Shah)</option>
            <option value="Easypaisa - 03117796065 (Mukhtar Ali Shah)">Easypaisa ‚Äì 03117796065 (Mukhtar Ali Shah)</option>
          </select>
        </label>
      </div>
      <div>
        <label>Notes (optional)<br><input id="c_notes" placeholder="Any delivery note"></label>
      </div>
    </div>

    <div class="actions">
      <button class="btn" onclick="downloadInvoice()">üìÑ Download Invoice (PDF)</button>
      <button class="btn link" onclick="sendWhatsapp()">üì≤ Send Order via WhatsApp</button>
      <div id="msg" class="success"></div>
    </div>
  </div>
</section>

<!-- Product details modal -->
<dialog id="detailDlg">
  <div class="modal-head">
    <div id="dlgTitle">Product details</div>
    <button class="close" onclick="document.getElementById('detailDlg').close()">√ó</button>
  </div>
  <div class="modal-body">
    <div style="display:grid;grid-template-columns:160px 1fr;gap:16px;align-items:start">
      <img id="dlgImg" alt="" style="width:160px;height:160px;object-fit:contain;background:#fafafa;border:1px solid #eee;border-radius:10px">
      <div>
        <div class="price" id="dlgPrice"></div>
        <h4 style="margin:.6rem 0 0">Benefits</h4>
        <ul id="dlgBenefits" style="margin:.3rem 0 .8rem 1rem"></ul>
        <h4 style="margin:0 0 .2rem">Ingredients</h4>
        <div id="dlgIngr" style="opacity:.9"></div>
        <div style="margin-top:12px">
          <button class="btn" id="dlgAddBtn">Add to Cart</button>
        </div>
      </div>
    </div>
  </div>
</dialog>

<script>
/* ---------- Product catalog ---------- */
/* NOTE: Messe Glycerin uses ONE image file for all sizes: messe_glycerin.png */
const PRODUCTS = [
  {
    key:'yumna_rice_beauty_cream',
    name:'Yumna Rice Beauty Cream',
    price:440,
    img:'yumna_rice_beauty_cream.png',
    benefits:[
      'Extra glow & brightening','Anti-wrinkle support','Helps reduce dark spots'
    ],
    ingredients:'Rice extract, Niacinamide, Vitamin E, Aloe Vera'
  },
  {
    key:'yumna_rice_polish',
    name:'Yumna Rice Skin Polish',
    price:610,
    img:'yumna_rice_polish.png',
    benefits:[
      'Gentle peel for smooth skin','Radiance boost','Helps unclog pores'
    ],
    ingredients:'Rice enzyme complex, Hyaluronic acid, Vitamin E'
  },
  {
    key:'messe_beauty_cream',
    name:'Messe Beauty Cream',
    price:450,
    img:'messe_beauty_cream.png',
    benefits:['Hydrating day cream','Improves skin texture','Light everyday use'],
    ingredients:'Aqua, Glycerin, Herbal actives, Vitamin B3'
  },
  {
    key:'messe_milky_face_wash',
    name:'Messe Milky Face Wash',
    price:530,
    img:'messe_milky_face_wash.png',
    benefits:['Removes excess oil','Gentle daily cleansing','Aloe & multivitamins'],
    ingredients:'Aloe Vera, Mild surfactants, Multivitamins blend'
  },
  {
    key:'messe_rose_water',
    name:'Messe Pure Rose Water',
    price:210,
    img:'messe_rose_water.jpeg',
    benefits:['Toner & refresher','Soothes skin','100% natural rose'],
    ingredients:'Pure steam-distilled rose water'
  },

  /* ---- Glycerin variants sharing the SAME image ---- */
  {
    key:'messe_gly_45',
    name:'Messe Glycerin (Small 45ml)',
    price:110,
    img:'messe_glycerin.png',
    benefits:['Locks in moisture','Soft, smooth skin'],
    ingredients:'Pure cosmetic-grade glycerin'
  },
  {
    key:'messe_gly_65',
    name:'Messe Glycerin (Medium 65ml)',
    price:160,
    img:'messe_glycerin.png',
    benefits:['Locks in moisture','Soft, smooth skin'],
    ingredients:'Pure cosmetic-grade glycerin'
  },
  {
    key:'messe_gly_100',
    name:'Messe Glycerin (Large 100ml)',
    price:210,
    img:'messe_glycerin.png',
    benefits:['Locks in moisture','Soft, smooth skin'],
    ingredients:'Pure cosmetic-grade glycerin'
  }
];

/* ---------- Render product grid ---------- */
const grid = document.getElementById('productGrid');
PRODUCTS.forEach(p=>{
  const el = document.createElement('div');
  el.className='card';
  el.innerHTML=`
    <img src="${p.img}" alt="${p.name}">
    <div class="body">
      <div style="min-height:44px"><b>${p.name}</b></div>
      <div class="price">Rs. ${p.price}</div>
      <div style="display:flex;gap:8px;margin-top:8px">
        <button class="btn" onclick="addToCart('${p.key}')">Add to Cart</button>
        <button class="btn link" onclick="openDetails('${p.key}')">View details</button>
      </div>
    </div>`;
  grid.appendChild(el);
});

/* ---------- Cart logic ---------- */
let cart = []; // {key, name, price, qty}

function addToCart(key){
  const p = PRODUCTS.find(x=>x.key===key);
  const found = cart.find(x=>x.key===key);
  if(found) found.qty++;
  else cart.push({key:p.key,name:p.name,price:p.price,qty:1});
  paintCart();
}

function changeQty(key,delta){
  const it = cart.find(x=>x.key===key);
  if(!it) return;
  it.qty += delta;
  if(it.qty<=0) cart = cart.filter(x=>x.key!==key);
  paintCart();
}

function paintCart(){
  const ul = document.getElementById('cartList');
  ul.innerHTML='';
  let subtotal=0;
  cart.forEach(it=>{
    subtotal += it.price*it.qty;
    const li = document.createElement('li');
    li.className='cart-item';
    li.innerHTML=`
      <div>${it.name}<br><small>Rs. ${it.price} each</small></div>
      <div class="qty">
        <span class="chip" onclick="changeQty('${it.key}',-1)">‚Äì</span>
        <b>${it.qty}</b>
        <span class="chip" onclick="changeQty('${it.key}',1)">+</span>
        <span style="width:80px;text-align:right">Rs. ${it.price*it.qty}</span>
      </div>`;
    ul.appendChild(li);
  });
  const tax = Math.round(subtotal*0.05);
  const discount = isDiscountDay()? Math.round(subtotal*0.10):0; // Thu, Sat, Sun
  const total = subtotal + tax - discount;
  document.getElementById('totals').textContent =
    `Subtotal: Rs. ${subtotal} ‚Ä¢ Tax (5%): Rs. ${tax} ‚Ä¢ Discount: Rs. ${discount} ‚Ä¢ Total: Rs. ${total}`;
}

/* Thu(4), Sat(6), Sun(0) */
function isDiscountDay(){
  const d = new Date().getDay();
  return [4,6,0].includes(d);
}

/* ---------- Details modal ---------- */
function openDetails(key){
  const p = PRODUCTS.find(x=>x.key===key);
  document.getElementById('dlgTitle').textContent = p.name;
  document.getElementById('dlgImg').src = p.img;
  document.getElementById('dlgPrice').textContent = `Rs. ${p.price}`;
  const ul = document.getElementById('dlgBenefits');
  ul.innerHTML = (p.benefits||[]).map(b=>`<li>${b}</li>`).join('');
  document.getElementById('dlgIngr').textContent = p.ingredients||'';
  const btn = document.getElementById('dlgAddBtn');
  btn.onclick = ()=>{ addToCart(p.key); document.getElementById('detailDlg').close(); };
  document.getElementById('detailDlg').showModal();
}

/* ---------- Helpers ---------- */
function getCustomer(){
  return {
    name: document.getElementById('c_name').value.trim(),
    email: document.getElementById('c_email').value.trim(),
    phone: document.getElementById('c_phone').value.trim(),
    city: document.getElementById('c_city').value.trim(),
    address: document.getElementById('c_address').value.trim(),
    payment: document.getElementById('c_payment').value,
    notes: document.getElementById('c_notes').value.trim()
  };
}

function requireCheckoutData(){
  const c=getCustomer();
  if(!c.name||!c.email||!c.phone||!c.city||!c.address){
    alert('Please fill in all required checkout fields.');
    return null;
  }
  if(cart.length===0){ alert('Your cart is empty.'); return null; }
  return c;
}

/* ---------- WhatsApp order (click-to-send) ---------- */
function sendWhatsapp(){
  const c = requireCheckoutData(); if(!c) return;
  const subtotal = cart.reduce((s,i)=>s+i.price*i.qty,0);
  const tax = Math.round(subtotal*0.05);
  const discount = isDiscountDay()? Math.round(subtotal*0.10):0;
  const total = subtotal + tax - discount;

  const items = cart.map(i=>`- ${i.name} x${i.qty} = Rs. ${i.price*i.qty}`).join('\n');

  const message = `üì¶ New Order ‚Äì SB & Sons Cosmetics

üë§ Customer: ${c.name}
üìß Email: ${c.email}
üìû Phone: ${c.phone}
üèôÔ∏è City: ${c.city}
üìç Address: ${c.address}
üìù Notes: ${c.notes || '-'}

üõçÔ∏è Items:
${items}

Subtotal: Rs. ${subtotal}
Tax (5%): Rs. ${tax}
Discount: Rs. ${discount}
Total: Rs. ${total}

üí≥ Payment: ${c.payment}
(Please confirm delivery.)`;

  const encoded = encodeURIComponent(message);
  const num1 = "923351411801";
  const num2 = "923040670263";
  window.open(`https://wa.me/${num1}?text=${encoded}`,'_blank');
  window.open(`https://wa.me/${num2}?text=${encoded}`,'_blank');
  document.getElementById('msg').textContent = 'Order message ready in your WhatsApp chats.';
}

/* ---------- Invoice PDF (styled like your sample) ---------- */
async function downloadInvoice(){
  const c = requireCheckoutData(); if(!c) return;

  const { jsPDF } = window.jspdf;
  const doc = new jsPDF({unit:'pt',format:'a4'});
  const pageW = doc.internal.pageSize.getWidth();

  try{
    const img = await loadImageAsDataURL('logo.png');
    doc.addImage(img,'PNG',pageW-140,40,80,80); // top-right logo
  }catch(e){ /* continue if logo not found */ }

  doc.setFont('helvetica','bold'); doc.setFontSize(36);
  doc.setTextColor(33,51,79);
  doc.text('RECEIPT', 56, 80);

  doc.setFontSize(11); doc.setFont('helvetica','normal'); doc.setTextColor(0,0,0);
  doc.text('SB & Sons Cosmetics', 56, 110);
  doc.text('Gujrat, Pakistan', 56, 126);
  doc.text('WhatsApp: +92 335 1411801  |  +92 304 0670263', 56, 142);

  const topY = 180;
  doc.setFont('helvetica','bold'); doc.text('BILL TO',56, topY);
  doc.setFont('helvetica','normal');
  doc.text([c.name,c.address,c.city,`Phone: ${c.phone}`,`Email: ${c.email}`],56, topY+18);

  doc.setFont('helvetica','bold'); doc.text('SHIP TO', 240, topY);
  doc.setFont('helvetica','normal');
  doc.text([c.name,c.address,c.city],240, topY+18);

  const invNo = 'INV-'+Date.now().toString().slice(-6);
  const today = new Date().toLocaleDateString();
  doc.setFont('helvetica','bold'); doc.text('RECEIPT #', 420, topY);
  doc.setFont('helvetica','normal'); doc.text(invNo, 500, topY);
  doc.setFont('helvetica','bold'); doc.text('DATE', 420, topY+18);
  doc.setFont('helvetica','normal'); doc.text(today, 500, topY+18);
  doc.setFont('helvetica','bold'); doc.text('PAYMENT', 420, topY+36);
  doc.setFont('helvetica','normal'); doc.text(c.payment, 500, topY+36);

  const body = cart.map(i=>[i.qty, i.name, `Rs. ${i.price}`, `Rs. ${i.price*i.qty}`]);
  const subtotal = cart.reduce((s,i)=>s+i.price*i.qty,0);
  const tax = Math.round(subtotal*0.05);
  const discount = isDiscountDay()? Math.round(subtotal*0.10):0;
  const total = subtotal + tax - discount;

  doc.autoTable({
    startY: 260,
    head:[['QTY','DESCRIPTION','UNIT PRICE','AMOUNT']],
    body,
    styles:{font:'helvetica',fontSize:11,cellPadding:6},
    headStyles:{fillColor:[236, 84, 84],textColor:255},
    theme:'grid',
    columnStyles:{0:{cellWidth:50},2:{cellWidth:100,halign:'right'},3:{cellWidth:110,halign:'right'}}
  });

  let y = doc.lastAutoTable.finalY + 16;
  doc.setFont('helvetica','normal'); doc.text(`Subtotal`, 420, y);
  doc.text(`Rs. ${subtotal}`, 520, y, {align:'right'}); y+=16;
  doc.text(`Sales Tax 5%`, 420, y);
  doc.text(`Rs. ${tax}`, 520, y, {align:'right'}); y+=16;
  doc.text(`Discount`, 420, y);
  doc.text(`- Rs. ${discount}`, 520, y, {align:'right'}); y+=16;

  doc.setFont('helvetica','bold'); doc.setFontSize(14);
  doc.text(`TOTAL`, 420, y+10);
  doc.text(`Rs. ${total}`, 520, y+10, {align:'right'});

  doc.setFont('helvetica','italic'); doc.setFontSize(22);
  doc.text('Thank you', 56, 780);

  doc.save(`${invNo}.pdf`);
  document.getElementById('msg').textContent = `Invoice downloaded (${invNo}.pdf).`;
}

/* helper: turn an image into a DataURL for jsPDF */
function loadImageAsDataURL(src){
  return new Promise((resolve,reject)=>{
    const img = new Image(); img.crossOrigin='anonymous';
    img.onload = ()=>{
      const c = document.createElement('canvas');
      c.width = img.naturalWidth; c.height = img.naturalHeight;
      const ctx = c.getContext('2d'); ctx.drawImage(img,0,0);
      resolve(c.toDataURL('image/png'));
    };
    img.onerror = reject; img.src = src;
  });
}

/* paint once initially */
paintCart();
</script>

</body>
</html>
